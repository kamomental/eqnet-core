<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="{{ url_for("static", path="observer.css") }}" />
    <script src="{{ url_for("static", path="htmx.min.js") }}"></script>
    <script>
      document.addEventListener("htmx:configRequest", function (event) {
        if (!event.detail.path) {
          return;
        }
        const fragmentPath = "{{ url_for('overlay_fragment_latest') }}";
        if (event.detail.path.indexOf(fragmentPath) === 0) {
          const sep = event.detail.path.indexOf("?") === -1 ? "?" : "&";
          event.detail.path = event.detail.path + sep + "_ts=" + Date.now();
        }
      });
    </script>
  </head>
  <body class="obs-body">
    <div
      id="obs-root"
      hx-get="{{ url_for('overlay_fragment_latest') }}"
      hx-trigger="load, every {{ poll_s }}s"
      hx-swap="innerHTML"
    ></div>
  </body>
</html>
