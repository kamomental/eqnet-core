model:
  use_assoc_kernel: false
  assoc_kernel:
    sigma_init: 1.2
    beta_local_init: -3.0
    beta_global_init: -3.0
    window_w: 128
    stride_s: 8
    use_kv_asymmetry: false
    use_bandwidth_gating: false
hub:
  mode: reflective

qualia_gate:
  theta: -1.45
  k_u: 2.0
  k_l: 2.0
  u0: 0.5
  l0: 0.5

qualia_access_gate:
  alpha: 1.0
  beta: 1.0
  gamma: 1.0
  theta: 1.0
  ema: 0.9
  open_tau: 0.6
  close_tau: 0.4
  theta_lr: 0.1
  target_access: 0.2
  boundary_enabled: true
  boundary_weight: 0.45
  boundary_threshold: 0.8
  boundary_curve: "linear"

ignition:
  theta_on: 0.62
  theta_off: 0.48
  dwell_steps: 8
telemetry:
  log_path: "telemetry/ignition-%Y%m%d.jsonl"
latency:
  tight_max_ms: 500
  loose_max_ms: 2000
  enable_loose: true
llm:
  model: "gpt-oss20b"
  stream: true
  max_tokens: 96
  temperature: 0.35
replay:
  min_interval_ms: 10
  sample_every: 1
  horizon: 3
  alpha: 0.6
  beta: 0.8
  gamma: 0.1
  future_ttl_sec: 90
  future_energy_threshold: 1.2
policy:
  entropy_coef: 0.03
  temperature_base: 0.9
  temperature_k_by_entropy: 0.2
guards:
  talk_block_on_guard: true
emotion:
  valence_w_rho: 1.0
  valence_w_s: 1.0
  resonance_k: 0.05
  affective_log_path: "memory/affective_log.jsonl"
moment_log_path: "logs/moment_log.jsonl"
nightly:
  forgetfulness_metrics:
    enable: true
    mode: "observe"
    epsilon: 0.0
    sign_balance_mode: "ratio"
    thresholds:
      delta_abs_max: null
      delta_nonzero_count_min: null
      delta_sign_balance_abs: null
      floors_applied_max: null
      consent_overrides_max: null
      monument_locks_max: null
culture:
  tag: "default"
  politeness: 0.5
  intimacy: 0.5
  feedback:
    enabled: false
    corr_high: 0.65
    corr_low: 0.35
    delta: 0.02
    clamp_min: 0.0
    clamp_max: 1.0
    vision_coefficients:
      handshake:
        normalize: "events"
        scale: 0.08
        politeness_delta: 0.05
        intimacy_delta: 0.03
        max_abs: 0.1
      bow:
        normalize: "events"
        scale: 0.05
        politeness_delta: 0.04
        intimacy_delta: 0.02
      anomaly:
        normalize: "detections"
        scale: 0.12
        politeness_delta: -0.08
        intimacy_delta: -0.05
        max_abs: 0.12
backchannel:
  enabled: true
  nod_threshold: 0.55
  aizuchi_threshold: 0.45
  min_gap_ms: 180
  cancel_on_voice_ms: 50
  rate_limit_cpm: 8
  silence_ms_for_nod: 260
  silence_ms_for_aizuchi: 420
  energy_bias: 0.05
  culture: "ja-JP"
presence:
  enable: true
  shadow_threshold: 0.70
  max_ack_interval_s: 180
  min_silence_ms: 1200
  short_after_silence_ms: 15000
  ack_key_short: "presence_ack.short"
  ack_key_minimal: "presence_ack.minimal"
  ack_max_chars: 24
ack:
  watch_key: "ack.watch"
  soothe_key: "ack.soothe"
  ask_key: "ack.ask"
  talk_key: "ack.talk"
  fast_ack_key: "ack.fast.ack"
  fast_breath_key: "ack.fast.breath"
  max_chars: 64
memory_hint_policy:
  enable: true
  allow_verbatim: false
  hint_style: "temperature"
  max_label_chars: 32
  max_reply_chars: 80
  hint_key_prefix: "memory_hint."
  ban_patterns:
    - "[\"'`]"
  social_mode: "solo"
  turn_taking_mode: "last_speaker_not_ai"
  style_when_suppressed: "none"
  min_silence_ms_for_hint: 600
  pressure_threshold: 0.9
  pressure_margin: 0.05
  pressure_decay_per_s: 0.985
  pressure_floor: 0.0
  pressure_ceiling: 1.0
  pressure_w_interrupt: 0.70
  pressure_w_social: 0.40
  pressure_w_lowconf: 0.60
offer_gate:
  threshold: 0.55
  listen_bias: 0.15
  cool_off_s: 12
memory_reference:
  enabled: true
  k: 3
  name_threshold: 0.50
  fidelity_high: 0.65
  fidelity_low: 0.45
  anchor_high: 0.50
  max_reply_chars: 140
  cue_label_chars: 24
  rarity_budget_day: 3
  rarity_budget_week: 12
  cooldown_s: 30
  log_path: "logs/memory_ref.jsonl"
  per_culture:
    ja-jp:
      max_reply_chars: 120
      cue_label_chars: 20
      rarity_budget_day: 3
      rarity_budget_week: 12
      cooldown_s: 30
observer:
  mode: "llm_first"
  max_latency_ms: 150
  rotation: "deterministic"
  templates_path: "config/i18n/disclaimer.yaml"
  community_bias: 0.05
  i_message_bias: 0.05
alerts:
  max_abs_valence_mean: 0.6
  min_corr_rho_I: 0.2
  min_corr_arousal_I: 0.1
  min_corr_rho_rho: 0.2
  max_allowed_lag: 8
  min_resonance_samples: 100
  max_abs_culture_valence_mean: 0.6
  min_culture_rho_mean: 0.2
  min_culture_samples: 20
resonance:
  logs: []
  resample_ms: 20
  zscore: true
  detrend: true
  window: "hann"
  alpha: 0.0
  beta: 0.0
pain_loop:
  adaptive: true
  forgive_threshold: 0.35
  rotate_daily: true
  max_events_per_nightly: 2000
  policy_threshold_base: 0.5
  a2a_empathy_gain_base: 0.1
  ema_alpha: 0.4
  l1_budget: 0.8
  l_inf_budget: 0.3
  min_threshold: 0.2
  max_threshold: 0.6
  quantile: 0.35
  min_samples: 50
  severity_window: 200
  max_empathy: 0.5
  replay_eval: false
  care_targets: []
  comfort_gain_base: 0.15
  protection_bias: 0.3
  growth_reward: 0.2
  patience_budget: 0.5
  care_mode:
    enabled: true
    canary_ratio: 0.1
    canary_seed: 227
    budgets:
      l1: 0.8
      l_inf: 0.3
forgetting:
  enable: true
  affect_day_mode: "latest_available"
  affect_fields:
    - "qualia_vec:2"
    - "metrics.body_stress_index"
    - "metrics.stress"
    - "metrics.arousal"
    - "mood.arousal"
  affect_agg: "max_abs"
  monument_floor_test: false
  monument_floor_top_k: 5
  recall_window_days: 7
  recall_k: 0.25
  recall_weight: 0.1
  affect_weight: 0.2
  interference_weight: 0.2
  interference_k: 1.0
  reconsolidation_rate: 0.3
  base_delta: 0.0
  max_delta_w: 0.08
  min_w: 0.05
  max_w: 1.0
  monument_w_lock: true
  monument_connection_floor: 0.06
  consent_floor: 0.02
  consent_override_tags:
    - "consent_override"
  input_sources:
    - "hub"
    - "heart_os_session"
  source_weights:
    hub: 1.0
    heart_os_session: 1.0
  source_paths:
    heart_os_session: "logs/moment_log.jsonl"
  memory_dir: "eqnet_data/memory"
  audit:
    enable_item_log: true
    item_log_path: "reports/forgetting/forgetting_items.jsonl"
    enable_summary: true
defrag:
  enable: true
  mode: "observe"
  cluster_similarity_threshold: 0.82
  conflict_isolation_strength: 0.4
  rollup_trigger_budget: 64
  observe:
    duplicate_similarity_threshold: 0.82
    conflict_interference_threshold: 0.4
    cooccur_min: 2
    top_k: 5
    max_pairs: 1000
    rollup_trigger_budget: 64
    id_privacy: "mask"
    similarity_bands:
      - 0.5
      - 0.7
      - 0.85
      - 0.95
ui:
  community_update_ms: 400
heartos_transition:
  post_risk_scale_default: 0.85
